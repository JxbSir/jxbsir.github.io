<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Java后端开发之基于SpringBoot三层架构</title>
  <meta name="description" content="创建SpringBoot项目  上一章已经讲过如何创建一个SpringBoot的项目，回顾请点击这里">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Java后端开发之基于SpringBoot三层架构">
  <meta name="twitter:description" content="创建SpringBoot项目  上一章已经讲过如何创建一个SpringBoot的项目，回顾请点击这里">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Java后端开发之基于SpringBoot三层架构">
  <meta property="og:description" content="创建SpringBoot项目  上一章已经讲过如何创建一个SpringBoot的项目，回顾请点击这里">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2019/02/JavaArchitecture/">
  <link rel="alternate" type="application/rss+xml" title="Peter's Den" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Peter's Den 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Peter's Den logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Peter's Den" class="blog-button">Peter's Den</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle"><span style="font-size:12px">悲观者只见到机会后面的问题，乐观者却看见问题后面的机会</span></span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">Hello，在下2012年涉足Apple Developer，至今在iOS/OSX领域混迹多年，本职工作以iOS为主</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">精通Objective-c/Swift，对Python/Java/.Net/JavaScript也略懂一二，会与大家在这里记录分享</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="访问Peter's all blogs" class="blog-button">Blogs</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/jxbsir" title="@jxbsir 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:i@jinxuebin.cn" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-blue"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2019-02-20 04:00:00 +0800" itemprop="datePublished" class="post-meta__date date">2019-02-20</time> &#8226; <span class="post-meta__tags tags">Java</span>
    </div>
    <h1 class="post-title">Java后端开发之基于SpringBoot三层架构</h1>
  </header>

  <section class="post">
    <h3 id="创建springboot项目">创建SpringBoot项目</h3>
<blockquote>
  <p>上一章已经讲过如何创建一个<code class="highlighter-rouge">SpringBoot</code>的项目，回顾请<a href="../firstSpringboot">点击这里</a></p>
</blockquote>

<h3 id="三层架构介绍">三层架构介绍</h3>
<blockquote>
  <p>三层架构(3-tier architecture) 通常意义上的三层架构就是将整个业务应用划分为：界面层（User Interface layer）、业务逻辑层（Business Logic Layer）、数据访问层（Data access layer）。</p>

  <ul>
    <li><strong>数据访问层</strong>：主要看数据层里面有没有包含逻辑处理，实际上它的各个函数主要完成各个对数据文件的操作。而不必管其他操作。</li>
    <li><strong>业务逻辑层</strong>：主要负责对数据层的操作。也就是说把一些数据层的操作进行组合。</li>
    <li><strong>表示层</strong>：主要对用户的请求接受，以及数据的返回，为客户端提供应用程序的访问。</li>
  </ul>

  <p>依赖关系：ULL -&gt; BLL -&gt; DAL，ULL不可直接引用DAL层</p>
</blockquote>

<h3 id="代码结构">代码结构</h3>
<blockquote>
  <p>下图是上一章创建的<code class="highlighter-rouge">SpringBoot</code>项目</p>

  <p><img src="http://xbqn.nbshk.cn/20190220103735_6PnErj_Screenshot.jpeg" alt="" /></p>

  <p>我们先把<code class="highlighter-rouge">src</code>删除，<code class="highlighter-rouge">target</code>是编译之后产生的目录，这边可以处理</p>

  <p>然后在项目上<code class="highlighter-rouge">右键</code>，点击<code class="highlighter-rouge">New Moudle</code>，按照创建上一章<code class="highlighter-rouge">SpringBoot</code>项目一样即可</p>

  <p><img src="http://xbqn.nbshk.cn/20190220104512_wXrVTb_Screenshot.jpeg" alt="" /></p>

  <p>创建3个<code class="highlighter-rouge">Module</code>：<code class="highlighter-rouge">web=界面层(这边用来做启动)</code>-<code class="highlighter-rouge">biz=业务层</code>-<code class="highlighter-rouge">dal=数据层</code></p>

  <p>还需要建一个<code class="highlighter-rouge">Module</code>：<code class="highlighter-rouge">share</code>=用于暴露接口</p>

  <p>每一层只要留下<code class="highlighter-rouge">src</code>、<code class="highlighter-rouge">*.iml</code>、<code class="highlighter-rouge">pom.xml</code>即可</p>

  <p>因为是<code class="highlighter-rouge">Module</code>所以每层里面自动会有一个<code class="highlighter-rouge">Application.java</code>的启动类，把<code class="highlighter-rouge">Biz</code>与<code class="highlighter-rouge">Dal</code>层的删除，只留下<code class="highlighter-rouge">web</code>层来启动就好了</p>

  <p><img src="http://xbqn.nbshk.cn/20190220105318_CNogOr_Screenshot.jpeg" alt="" /></p>

  <p>然后我们需要去各层项目中的<code class="highlighter-rouge">pom.xml</code>配置模块依赖</p>

  <p>首先是最外层的<code class="highlighter-rouge">pom.xml</code>，这边添加的是模块属性，代表这个根项目中包含3个模块</p>

  <p><img src="http://xbqn.nbshk.cn/20190220171240_3vwbNT_Screenshot.jpeg" alt="" /></p>

  <p>然后是去<code class="highlighter-rouge">web</code>层，这边添加的不是模块属性了，因为是在模块中配置了，此时应该配置依赖了，<code class="highlighter-rouge">web</code>层应该是依赖<code class="highlighter-rouge">biz</code>；然后同理<code class="highlighter-rouge">biz</code>去配置依赖<code class="highlighter-rouge">dal</code>就好了</p>

  <p><img src="http://xbqn.nbshk.cn/20190220171342_RjFP8m_Screenshot.jpeg" alt="" /></p>

  <p>然后将<code class="highlighter-rouge">biz</code>与<code class="highlighter-rouge">dal</code>层中的<code class="highlighter-rouge">application.properties</code>重命名各层项目的名字，如<code class="highlighter-rouge">application-biz.properties</code></p>

  <p>ok，此时配置已经告一段落，接下来就是如何把三层访问连接起来…</p>
</blockquote>

<h3 id="三层访问">三层访问</h3>
<blockquote>
  <h4 id="dal层">DAL层</h4>
  <p><em>前言：数据层我们是选用<code class="highlighter-rouge">Mybatis</code>框架，在后面会使用到，不熟悉<code class="highlighter-rouge">Mybatis</code>的暂时可以先<code class="highlighter-rouge">google</code>了解下</em></p>
  <blockquote>
    <p>在<code class="highlighter-rouge">dal</code>中的<code class="highlighter-rouge">application-biz.properties</code>配置数据库信息(<code class="highlighter-rouge">MySQL</code>的安装之前的文章也有提过)，因为我们是用<code class="highlighter-rouge">Mybatis</code>框架，所以同时需要配置<code class="highlighter-rouge">Mybatis</code></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//mysql
spring.datasource.url=jdbc:mysql://localhost:3306/TestDB
spring.datasource.username=root
spring.datasource.password=@ASDasd123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
//mybatis config
mybatis.mapper-locations=classpath:/mappering/*mapper.xml
mybatis.configuration.use-column-label=true
mybatis.configuration.use-generated-keys=false
mybatis.configuration.auto-mapping-behavior=FULL
mybatis.configuration.default-fetch-size=100
mybatis.configuration.local-cache-scope=SESSION
mybatis.configuration.lazy-loading-enabled=false
mybatis.configuration.jdbc-type-for-null=OTHER
mybatis.configuration.lazy-load-trigger-methods=equals,clone,hashCode,toString
mybatis.configuration.safe-row-bounds-enabled=false
mybatis.configuration.default-statement-timeout=30
mybatis.configuration.default-executor-type=SIMPLE
mybatis.type-aliases-package=cn.jinxuebin.demodal.model
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.multiple-result-sets-enabled=true
mybatis.configuration.cache-enabled=true
</code></pre></div>    </div>
    <p>在pom.xml中需要加入依赖</p>

    <p><img src="http://xbqn.nbshk.cn/20190220171441_IazMtU_Screenshot.jpeg" alt="" /></p>

    <p>由于<code class="highlighter-rouge">datasource</code>的配置是在<code class="highlighter-rouge">dal</code>层的<code class="highlighter-rouge">application-biz.properties</code>里，项目启动的时候不会读取这个配置，所以需要加一个配置类<code class="highlighter-rouge">DalConfig.java</code></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">jinxuebin</span><span class="o">.</span><span class="na">demodal</span><span class="o">.</span><span class="na">config</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.PropertySource</span><span class="o">;</span>
<span class="cm">/**
 * @author Peter
 * @description DAL配置类
 * @data 2019-02-20
 */</span>
<span class="nd">@Configuration</span>
<span class="nd">@MapperScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="s">"cn.jinxuebin.demodal.dao"</span><span class="o">)</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="n">value</span><span class="o">=</span> <span class="o">{</span><span class="s">"classpath:application-dal.properties"</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DalConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div>    </div>

    <p>我已经在本地的数据库简单建了一张测试的<code class="highlighter-rouge">Products</code>表</p>

    <p><img src="http://xbqn.nbshk.cn/20190220140838_yZBIOV_Screenshot.jpeg" alt="" /></p>

    <p>然后利用<a href="http://www.mybatis.org/generator/"><code class="highlighter-rouge">Mybatis-generator</code></a>工具生成相应的<code class="highlighter-rouge">Dao/Model/Mapper</code></p>

    <p>关键文件就这么3个</p>

    <p><img src="http://xbqn.nbshk.cn/20190220141608_AVuVBC_Screenshot.jpeg" alt="" /></p>

    <ul>
      <li><strong>mybatis-generator-core-1.3.7.jar</strong> 它就是生成工具<code class="highlighter-rouge">jar</code>包</li>
      <li><strong>mysql-connector-java-8.0.15.jar</strong> 它就是<code class="highlighter-rouge">mysql</code>连接<code class="highlighter-rouge">jar</code>包，版本需一致</li>
      <li><strong>generatorConfig.xml</strong> 这个就是生成器的配置文件了</li>
      <li><strong>src</strong> 这个是空的就可以，代码会自动生成到这边</li>
    </ul>

    <p><code class="highlighter-rouge">generatorConfig.xml</code>根据需求配置，注意<code class="highlighter-rouge">namespace/type/parameterType</code>检查是否正确</p>

    <p>执行命令<code class="highlighter-rouge">java -jar mybatis-generator-core-1.3.7.jar -configfile generatorConfig.xml -overwrite</code>就生成成功了，然后把这些类放到工程里</p>

    <p><code class="highlighter-rouge">DAL</code>层的代码类如下图，具体代码里的注解请直接看源码</p>

    <p><img src="http://xbqn.nbshk.cn/20190220163911_d33AgV_Screenshot.jpeg" alt="" /></p>
  </blockquote>

  <h4 id="share">Share</h4>
  <p><em>前言</em>： <code class="highlighter-rouge">Share</code>不属于三层的范围，它只是<code class="highlighter-rouge">BLL</code>层对外开放的接口层，当其他应用需要调我们这个服务的时候就会用到<code class="highlighter-rouge">Share</code>这个<code class="highlighter-rouge">Module</code>；<code class="highlighter-rouge">Share</code>还需要提供<code class="highlighter-rouge">BO</code>实体类，也是用来提供给外部</p>
  <blockquote>
    <p>本章就简单一点，建一个<code class="highlighter-rouge">interface</code>，里面就一个方法</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">jinxuebin</span><span class="o">.</span><span class="na">demoshare</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demoshare.bo.ProductsBO</span><span class="o">;</span>
<span class="cm">/**
 * @author Peter
 * @description Products业务接口类
 * @data 2019-02-20
 */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IProductsService</span> <span class="o">{</span>
    <span class="n">ProductsBO</span> <span class="nf">getProductById</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </blockquote>

  <h4 id="bll">BLL</h4>
  <p><em>前言</em>： <code class="highlighter-rouge">BLL</code>是业务逻辑层，基本上应该都是业务代码，所以不会像<code class="highlighter-rouge">DAL</code>那么多配置，相对比较明朗</p>
  <blockquote>
    <p>首先当然也是<code class="highlighter-rouge">BLL</code>的配置类：<code class="highlighter-rouge">BizConfig.java</code></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">jinxuebin</span><span class="o">.</span><span class="na">demodal</span><span class="o">.</span><span class="na">config</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.PropertySource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.spring.annotation.MapperScan</span><span class="o">;</span>
<span class="cm">/**
 * @author Peter
 * @description DAL配置类
 * @data 2019-02-20
 */</span>
<span class="nd">@Configuration</span>
<span class="nd">@MapperScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="s">"cn.jinxuebin.demodal.dao"</span><span class="o">)</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="n">value</span><span class="o">=</span> <span class="o">{</span><span class="s">"classpath:application-dal.properties"</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DalConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <p>然后就是定义一个Imp实现类来实现IProductsService</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">jinxuebin</span><span class="o">.</span><span class="na">demobiz</span><span class="o">.</span><span class="na">imp</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demobiz.ProductsManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demoshare.IProductsService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demoshare.bo.ProductsBO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="cm">/**
 * @author Peter
 * @description ProductsService实现类
 * @data 2019-02-20
 */</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductsImp</span> <span class="kd">implements</span> <span class="n">IProductsService</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">ProductsManager</span> <span class="n">productsManager</span><span class="o">;</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">ProductsBO</span> <span class="nf">getProductById</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">productsManager</span><span class="o">.</span><span class="na">getProductById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>

    <p>然后需要一个实现业务逻辑的Manager类</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">jinxuebin</span><span class="o">.</span><span class="na">demobiz</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demodal.dao.ProductsMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demodal.model.Products</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demoshare.bo.ProductsBO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="cm">/**
 * @author Peter
 * @description 商品业务类
 * @data 2019-02-20
 */</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductsManager</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">ProductsMapper</span> <span class="n">productsMapper</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">ProductsBO</span> <span class="nf">getProductById</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    	<span class="c1">//将DO实体类转化成BO实体类，这边就不封装函数了，简单实现下</span>
        <span class="n">Products</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">productsMapper</span><span class="o">.</span><span class="na">selectByPrimaryKey</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="n">ProductsBO</span> <span class="n">bo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProductsBO</span><span class="o">();</span>
        <span class="n">bo</span><span class="o">.</span><span class="na">setItemid</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getItemid</span><span class="o">());</span>
        <span class="n">bo</span><span class="o">.</span><span class="na">setDesc</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getItemdesc</span><span class="o">());</span>
        <span class="n">bo</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getItemname</span><span class="o">());</span>
        <span class="n">bo</span><span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getPrice</span><span class="o">());</span>
        <span class="n">bo</span><span class="o">.</span><span class="na">setShopid</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">getShopid</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">bo</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </blockquote>

  <h4 id="ull">ULL</h4>
  <p><em>前言</em>：这边我们就是一个<code class="highlighter-rouge">Web</code>的<code class="highlighter-rouge">Module</code>用来做启动</p>
  <blockquote>
    <p>创建<code class="highlighter-rouge">Application.java</code></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">jinxuebin</span><span class="o">.</span><span class="na">demoweb</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demobiz.config.BizConfig</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demodal.config.DalConfig</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demoshare.IProductsService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.jinxuebin.demoshare.bo.ProductsBO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.fasterxml.jackson.databind.util.JSONPObject</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.mysql.cj.xdevapi.JsonArray</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.minidev.json.JSONObject</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.minidev.json.JSONValue</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.spring.annotation.MapperScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
<span class="nd">@SpringBootApplication</span>
<span class="nd">@RestController</span>
<span class="nd">@Import</span><span class="o">({</span><span class="n">BizConfig</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">DalConfig</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DemoWebApplication</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">DemoWebApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="nd">@Autowired</span>
	<span class="kd">private</span> <span class="n">IProductsService</span> <span class="n">service</span><span class="o">;</span>
	<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/book"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="n">String</span> <span class="nf">home</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">ProductsBO</span> <span class="n">bo</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getProductById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">JSONValue</span><span class="o">.</span><span class="na">toJSONString</span><span class="o">(</span><span class="n">bo</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<h3 id="ok这样就基本完成了然后启动下看看若没报错就成功了">OK，这样就基本完成了，然后启动下看看，若没报错就成功了</h3>
<blockquote>
  <p>访问地址：<code class="highlighter-rouge">http://127.0.0.1:8080/book?id=1</code>，可以看到数据了</p>

  <p><img src="http://xbqn.nbshk.cn/20190220170125_FRbzEi_Screenshot.jpeg" alt="" /></p>
</blockquote>

<h3 id="这边把建表的sql语句提供下">这边把建表的SQL语句提供下</h3>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">table</span> <span class="n">Products</span>
<span class="p">(</span>
  <span class="n">ItemId</span>   <span class="n">int</span> <span class="n">auto_increment</span>
    <span class="k">primary</span> <span class="k">key</span><span class="p">,</span>
  <span class="n">ItemName</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span> <span class="k">null</span><span class="p">,</span>
  <span class="n">ItemDesc</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span> <span class="k">null</span><span class="p">,</span>
  <span class="n">Price</span>    <span class="n">double</span>       <span class="k">not</span> <span class="k">null</span><span class="p">,</span>
  <span class="n">ShopId</span>   <span class="n">int</span>          <span class="k">not</span> <span class="k">null</span>
<span class="p">);</span>
</code></pre></div></div>


  </section>
</article>

<section class="read-more">
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2019/02/firstSpringboot/" title="link to 创建第一个SpringBoot项目">创建第一个SpringBoot项目</a></h2>
       <p class="excerpt">创建项目  关于如何配置访问请看上一节  Create New Project      选择Spring Initializr            根据需求配置Project Metadata        直接Next - 暂时不用勾选其他  下一步配置项目名称与项目路径，然后Finish，项目就创建好了          注意：创建项目后，SpringBoot会自动配置从Maven下载依赖，所以需要点时间，可以看到底部有进度条      启动项目  配置pom.xml，这个配置就是...&hellip;</p>
       <div class="post-list__meta"><time datetime="2019-02-19 20:30:30 +0800" class="post-list__meta--date date">2019-02-19</time> &#8226; <span class="post-list__meta--tags tags">Java</span><a class="btn-border-small" href=/2019/02/firstSpringboot/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://localhost:4000/2019/02/JavaArchitecture/";
        this.page.identifier = "/2019/02/JavaArchitecture/";
    };

    var disqus_shortname = 'peter';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2019-02-20 生成，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题</a> - &copy; 2019</span>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-72007485-5', 'jinxuebin.cn');
    ga('send', 'pageview');
</script>


    
  </body>

</html>
